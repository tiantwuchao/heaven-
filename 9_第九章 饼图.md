### 饼图

**参数解读**

- x：指定绘图的数据；
- explode：指定饼图某些部分的突出显示，即呈现爆炸式；
- labels：为饼图添加标签说明，类似于图例说明；
- colors：指定饼图的填充色；
- autopct：自动添加百分比显示，可以采用格式化的方法显示；
- pctdistance：设置百分比标签与圆心的距离；
- shadow：是否添加饼图的阴影效果；
- labeldistance：设置各扇形标签（图例）与圆心的距离；
- startangle：设置饼图的初始摆放角度；
- radius：设置饼图的半径大小；
- counterclock：是否让饼图按逆时针顺序呈现；
- wedgeprops：设置饼图内外边界的属性，如边界线的粗细、颜色等；
- textprops：设置饼图中文本的属性，如字体大小、颜色等；
- center：指定饼图的中心点位置，默认为原点
- frame：是否要显示饼图背后的图框，如果设置为True的话，需要同时控制图框x轴、y轴的范围和饼图的中心位置；



饼图广泛得应用在各个领域，用于表示不同分类的占比情况，通过弧度大小来对比各种分类。**饼图通过将一个圆饼按照分类的占比划分成多个区块，整个圆饼代表数据的总量，每个区块（圆弧）表示该分类占总体的比例大小，所有区块（圆弧）的加和等于 100%。**



**简单饼图**

```python
import matplotlib.pyplot as plt

plt.pie(x=[1,2,3],#指定绘图数据
        labels=['A','B','C'],#为饼图添加标签说明
       )
plt.axis('equal')  # 保证是一个圆形 
plt.show()
```



![image-20210517104105125](饼图/image-20210517104105125.png)





#### 添加颜色

**colors**

```python
import matplotlib.pyplot as plt

plt.pie(x=[1,2,3],#指定绘图数据
        labels=['A','B','C'],#为饼图添加标签说明
#         colors=["#d5695d", "#5d8ca8", "#65a479"],)#修改饼图颜色，传入颜色list
        colors=plt.cm.get_cmap('Set3')(range(3)))#使用matplotlib自带颜色
        

plt.axis('equal')  # 保证是一个圆形 
plt.show()
```

![image-20210517134505142](饼图/image-20210517134505142.png)



#### 饼图某部分突出

**explode**

```python
import matplotlib.pyplot as plt

plt.pie(x=[1,2,3],#指定绘图数据
        labels=['A','B','C'],#为饼图添加标签说明
#         colors=["#d5695d", "#5d8ca8", "#65a479"],)#修改饼图颜色，传入颜色list
        colors=plt.cm.get_cmap('Set3')(range(3)),#使用matplotlib自带颜色,
        explode =(0, 0.2, 0)),#某部分突出显示，值越大，距离中心越远，该法可解决饼图字体重叠的问题

plt.axis('equal')  # 保证是一个圆形 
plt.show()
```

![image-20210517104812494](饼图/image-20210517104812494.png)





#### 格式化显示每部分数据

**autopct**

```python
import matplotlib.pyplot as plt

plt.pie(
    x=[1, 2, 3],  #指定绘图数据
    labels=['A', 'B', 'C'],  #为饼图添加标签说明
    #         colors=["#d5695d", "#5d8ca8", "#65a479"],)#修改饼图颜色，传入颜色list
    colors=plt.cm.get_cmap('Set3')(range(3)),  #使用matplotlib自带颜色,
    explode=(0, 0.2, 0),
    autopct='%.2f%%',  #格式化输出百分比
)  
plt.axis('equal')  # 保证是一个圆形
plt.show()

```

![image-20210517104916547](饼图/image-20210517104916547.png)



#### 圈中文字与中心距离

**pctdistance**

****

```python
import matplotlib.pyplot as plt

plt.pie(
    x=[1, 2, 3],  #指定绘图数据
    labels=['A', 'B', 'C'],  #为饼图添加标签说明
    #         colors=["#d5695d", "#5d8ca8", "#65a479"],)#修改饼图颜色，传入颜色list
    colors=plt.cm.get_cmap('Set3')(range(3)),  #使用matplotlib自带颜色,
    explode=(0, 0.2, 0),
    autopct='%.2f%%',
    pctdistance=0.2,  #百分比标签与圆心的距离 默认是0.6

)

plt.axis('equal')  # 保证是一个圆形
plt.show()
```

![image-20210517105158460](饼图/image-20210517105158460.png)





#### 周围标签名与中心距离

**labeldistance**

```python
import matplotlib.pyplot as plt

plt.pie(
    x=[1, 2, 3],  #指定绘图数据
    labels=['A', 'B', 'C'],  #为饼图添加标签说明
    #         colors=["#d5695d", "#5d8ca8", "#65a479"],)#修改饼图颜色，传入颜色list
    colors=plt.cm.get_cmap('Set3')(range(3)),  #使用matplotlib自带颜色,
    explode=(0, 0.2, 0),
    autopct='%.2f%%',
    pctdistance=0.3,  #百分比标签与圆心的距离
    labeldistance=1.5,  #labels与圈边界的距离，默认为1.1     
)

plt.axis('equal')  # 保证是一个圆形
plt.show()
```

![image-20210517105241809](饼图/image-20210517105241809.png)







#### 饼图开始角度

**startangle**

```python
import matplotlib.pyplot as plt

plt.pie(
    x=[1, 2, 3],  #指定绘图数据
    labels=['A', 'B', 'C'],  #为饼图添加标签说明
    #         colors=["#d5695d", "#5d8ca8", "#65a479"],)#修改饼图颜色，传入颜色list
    colors=plt.cm.get_cmap('Set3')(range(5)),  #使用matplotlib自带颜色,
    explode=(0, 0.2, 0),
    autopct='%.2f%%',
    pctdistance=0.3,  #百分比标签与圆心的距离
    labeldistance=1.5,  #labels与圈边界的距离，默认为1.1     
    startangle=45,#饼图的开始角度，默认为0度
)

plt.axis('equal')  # 保证是一个圆形
plt.show()
```

![image-20210517105557023](饼图/image-20210517105557023.png)



#### 饼图框属性设置

**wedgeprops**

```python
import matplotlib.pyplot as plt

plt.pie(
    x=[1, 2, 3],  #指定绘图数据
    labels=['A', 'B', 'C'],  #为饼图添加标签说明
    #         colors=["#d5695d", "#5d8ca8", "#65a479"],)#修改饼图颜色，传入颜色list
    colors=plt.cm.get_cmap('Set3')(range(5)),  #使用matplotlib自带颜色,
    explode=(0, 0.2, 0),
    autopct='%.2f%%',
    pctdistance=0.5,  #百分比标签与圆心的距离 默认是 0.6 
    labeldistance=1.2,  #labels与圈边界的距离，默认为1.1     
    startangle=45,  #饼图的开始角度，默认为0度
    wedgeprops={
        'edgecolor': 'r',  #内外框颜色
        'linestyle': '--',  #线型
        'alpha': 0.5,  #透明度
        #更多参考matplotlib.patches.Wedge
    })

plt.axis('equal')  # 保证是一个圆形 有的像是被压扁了一样
plt.show()
```

![image-20210517105755977](饼图/image-20210517105755977.png)







#### 饼图文本属性

**textprops**

```python

import matplotlib.pyplot as plt

plt.pie(
    x=[1, 2, 3],  #指定绘图数据
    labels=['A', 'B', 'C'],  #为饼图添加标签说明
    #         colors=["#d5695d", "#5d8ca8", "#65a479"],)#修改饼图颜色，传入颜色list
    colors=plt.cm.get_cmap('Set3')(range(5)),  #使用matplotlib自带颜色,
    explode=(0, 0.2, 0),
    autopct='%.2f%%',
    pctdistance=0.6,  #百分比标签与圆心的距离
    labeldistance=1.2,  #labels与圈边界的距离，默认为1.1     
    startangle=45,  #饼图的开始角度，默认为0度
    wedgeprops={
        'edgecolor': 'r',  #内外框颜色
        'linestyle': '--',  #线型
        'alpha': 0.5,  #透明度
        #更多参考matplotlib.patches.Wedge
    },
    textprops={
        'color': 'r',  #文本颜色
        'fontsize': 16,  #文本大小
        'fontfamily': 'FangSong',  #设置微软雅黑字体
        #更多参考matplotlib.pyplot.text
    })

plt.axis('equal')  # 保证是一个圆形
plt.show()
```



![image-20210517110446379](饼图/image-20210517110446379.png)



#### 加阴影

**shadow= True**

```python
import matplotlib.pyplot as plt

plt.pie(
    x=[1, 2, 3],  #指定绘图数据
    labels=['A', 'B', 'C'],  #为饼图添加标签说明
    #         colors=["#d5695d", "#5d8ca8", "#65a479"],)#修改饼图颜色，传入颜色list
    colors=plt.cm.get_cmap('Set3')(range(5)),  #使用matplotlib自带颜色,
    explode=(0, 0.2, 0),
    autopct='%.2f%%',
    pctdistance=0.6,  #百分比标签与圆心的距离
    labeldistance=1.2,  #labels与圈边界的距离，默认为1.1     
    startangle=45,  #饼图的开始角度，默认为0度
    shadow= True,   # 加阴影  ****
    wedgeprops={
        'edgecolor': 'r',  #内外框颜色
        'linestyle': '--',  #线型
        'alpha': 0.5,  #透明度
        #更多参考matplotlib.patches.Wedge
    },
    textprops={
        'color': 'r',  #文本颜色
        'fontsize': 16,  #文本大小
        'fontfamily': 'Microsoft JhengHei',  #设置微软雅黑字体
        #更多参考matplotlib.pyplot.text
    })

plt.axis('equal')  # 保证是一个圆形
plt.show()
```

![image-20210517115403661](饼图/image-20210517115403661.png)





#### 个性化设置

```python
plt.figure()

patches, texts, autotexts = plt.pie(
    x=[1, 2, 3],  #返回三个对象
    labels=['A', 'B', 'C'],
    colors=["#d5695d", "#5d8ca8", "#65a479"],
    explode=(0, 0.2, 0),
    autopct='%.2f%%',
#     autopct='%.2f%%',
    #         explode=(0.1,0,0)
)
texts[0].set_color('r')  #修改A标签的颜色
texts[1].set_size('20')  #修改B的大小

#matplotlib.patches.Wedge
patches[0].set_alpha(0.3)  #A组分设置透明度
patches[2].set_hatch('|')  #C组分添加网格线
patches[1].set_hatch('x')

plt.legend(
    patches,
    ['A', 'B', 'C'],  #添加图例
    title="Pie Learning",
    loc="best",
    fontsize=15)

plt.title('Your pie', size=20)
plt.axis('equal')  # 保证是一个圆形
plt.show()
print(autotexts)
print(patches)
```

![image-20210517161449116](饼图/image-20210517161449116.png)



#### 案例

要求 :  **做出最后一个样本的第一,第二 第三产业的增加总值**(第一季度)



```python
import matplotlib.pyplot as plt
import  pandas as  pd  
df = pd.read_excel('./new_guomin.xlsx')
# 支持中文
plt.rcParams['font.sans-serif'] = ['SimHei']  # 用来正常显示中文标签
plt.rcParams['axes.unicode_minus'] = False  # 用来正常显示负号

x = df.iloc[-1, 4:7]

explode = (0.01, 0.02, 0.03)

labels = ['第一产业', '第二产业', '第三产业']

autopct = '%.1f%%'

plt.pie(x=x, labels=labels, explode=explode, autopct=autopct, shadow=True)
plt.axis('equal')
plt.title('第一季度各个产业增加总值占比')
plt.legend()
plt.savefig('./占比饼图')  #  保存图片的方法 
plt.show()
```

![image-20210517120131115](饼图/image-20210517120131115.png)





